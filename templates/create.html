{% extends "base.html" %}

{% block title %}Create Report Card{% endblock %}

{% block content %}
<h1>Create New Report Card</h1>

<form method="POST">
    <div class="form-group">
        <label for="card_type">Report Card Type:</label>
        <select name="card_type" id="card_type" required onchange="updateFields()">
            <option value="">-- Select Type --</option>
            <option value="student">Student</option>
            <option value="teacher">Teacher</option>
            <option value="course">Course</option>
        </select>
    </div>
    
    <div class="form-group">
        <label for="account_id">Account ID:</label>
        <input type="text" name="account_id" id="account_id" required>
    </div>
    
    <div class="form-group">
        <label for="reference_date">Reference Date:</label>
        <input type="date" name="reference_date" id="reference_date" required>
    </div>
    
    <div id="student_fields" style="display: none;">
        <div class="form-group">
            <label for="student_name">Student Name:</label>
            <input type="text" name="student_name" id="student_name">
        </div>
    </div>
    
    <div id="teacher_fields" style="display: none;">
        <div class="form-group">
            <label for="teacher_name">Teacher Name:</label>
            <input type="text" name="teacher_name" id="teacher_name">
        </div>
        <div class="form-group">
            <label for="subject">Subject:</label>
            <input type="text" name="subject" id="subject">
        </div>
    </div>
    
    <div id="course_fields" style="display: none;">
        <div class="form-group">
            <label for="course_name">Course Name:</label>
            <input type="text" name="course_name" id="course_name">
        </div>
        <div class="form-group">
            <label for="course_code">Course Code:</label>
            <input type="text" name="course_code" id="course_code">
        </div>
    </div>
    
    <button type="submit">Create Report Card</button>
</form>

<a href="{{ url_for('index') }}" class="back-link">Back to List</a>

<script>
function updateFields() {
    var cardType = document.getElementById('card_type').value;
    
    // Hide all type-specific fields
    document.getElementById('student_fields').style.display = 'none';
    document.getElementById('teacher_fields').style.display = 'none';
    document.getElementById('course_fields').style.display = 'none';
    
    // Clear required attributes
    document.getElementById('student_name').required = false;
    document.getElementById('teacher_name').required = false;
    document.getElementById('subject').required = false;
    document.getElementById('course_name').required = false;
    document.getElementById('course_code').required = false;
    
    // Show relevant fields and set required
    if (cardType === 'student') {
        document.getElementById('student_fields').style.display = 'block';
        document.getElementById('student_name').required = true;
    } else if (cardType === 'teacher') {
        document.getElementById('teacher_fields').style.display = 'block';
        document.getElementById('teacher_name').required = true;
        document.getElementById('subject').required = true;
    } else if (cardType === 'course') {
        document.getElementById('course_fields').style.display = 'block';
        document.getElementById('course_name').required = true;
        document.getElementById('course_code').required = true;
    }
}
</script>
{% endblock %}
